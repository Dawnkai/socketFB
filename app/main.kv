#:kivy 2.0
ScreenManager:
    LoginScreen:
    RegisterScreen:
    ProfileScreen:
    AddFriendScreen:
    ChatScreen:

<LoginScreen>:
    name: 'login'
    MDLabel:
        id: log_info
        text: ""
        size_hint_x: None
        pos_hint: {'center_x': 0.5, 'center_y': 0.75}
        halign: 'center'
        color: (1,0,0)
        width: 150
    MDTextField:
        id: user
        hint_text: "username"
        size_hint_x: None
        pos_hint: {'center_x': 0.5, 'center_y': 0.7}
        width: 150
    MDTextField:
        id: passwd
        hint_text: "password"
        size_hint_x: None
        pos_hint: {'center_x': 0.5, 'center_y': 0.6}
        width: 150
        password: True
    MDRectangleFlatButton:
        text: 'Log In'
        pos_hint: {'center_x':0.5,'center_y':0.5}
        on_press: root.login()
    MDTextButton:
        text: 'Create account'
        pos_hint: {'center_x':0.5,'center_y':0.4}
        on_press: root.manager.current = 'register'
        font_size: 12
    MDTextButton:
        text: 'Admin_test'
        pos_hint: {'center_x':0.5,'center_y':0.3}
        on_press: root.admin_test()
        color: 1,0,1,1
        font_size: 12

<RegisterScreen>:
    name: 'register'
    MDLabel:
        id: reg_info
        text: "asd"
        size_hint_x: None
        pos_hint: {'center_x': 0.5, 'center_y': 0.8}
        halign: 'center'
        color: (0,1,0,0.7)
        width: 150
    MDTextField:
        id: ruser
        hint_text: "new username"
        size_hint_x: None
        pos_hint: {'center_x': 0.5, 'center_y': 0.7}
        width: 150
    MDTextField:
        id: rpasswd
        hint_text: "new password"
        size_hint_x: None
        pos_hint: {'center_x': 0.5, 'center_y': 0.6}
        width: 150
        password: True
    MDRectangleFlatButton:
        text: 'Register now'
        pos_hint: {'center_x':0.5,'center_y':0.5}
        on_press: root.register()
    MDTextButton:
        text: 'Go back'
        pos_hint: {'center_x':0.5,'center_y':0.4}
        on_press: root.manager.current = 'login'
        font_size: 12
    MDTextButton:
        text: 'Admin_test'
        pos_hint: {'center_x':0.5,'center_y':0.3}
        on_press: root.admin_test()
        color: 1,0,1,1
        font_size: 12
    
    
<ProfileScreen>:
    name: 'profile'

    MDDropDownItem:
        id: drop_item
        pos_hint: {'center_x': .5, 'center_y': .5}
        text: 'Item 0'
        on_release: root.menu.open()
    MDTextButton:
        text: 'send message'
        pos_hint: {'center_x':0.5,'center_y':0.1}
        on_press: root.manager.current = 'chat'
        color: 1,0,1,1
        font_size: 12

<AddFriendScreen>:
    name: 'add'
    MDLabel:
        text: 'Add a new firend by username.'
        halign: 'center'
        pos_hint: {'center_x':0.5, 'center_y': 0.9}
    MDLabel:
        id: add_info
        text: ''
        halign: 'center'
        pos_hint: {'center_x':0.5, 'center_y': 0.8}
        color: (0,1,0,0.7)
    MDTextField:
        id: fname
        hint_text: "friend username"
        size_hint_x: None
        pos_hint: {'center_x': 0.5, 'center_y': 0.7}
        width: 150
    MDRectangleFlatButton:
        text: 'Add friend'
        pos_hint: {'center_x':0.5,'center_y':0.5}
        on_press: root.addFriend()
    MDTextButton:
        text: 'Go back'
        pos_hint: {'center_x':0.5,'center_y':0.4}
        on_press: root.manager.current = 'profile'
        font_size: 12
       
<ChatScreen>:
    name: 'chat'
    MDLabel:
        id: chat_info
        text: ''
        halign: 'center'
        pos_hint: {'center_x':0.5, 'center_y': 0.7}
        color: (1,0,0)
    ScrollView:
        MDLabel:
            padding: 10, 10
            id: chat_field
            font_size: 12
            halign: 'left'
            size_hint: None, None
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
    MDTextField:
        id: send_to
        hint_text: "text to..."
        size_hint_x: None
        pos_hint: {'center_x': 0.3, 'center_y': 0.3}
        width: 150
    
    MDTextField:
        id: chat_msg
        hint_text: "Type here..."
        size_hint_x: None
        pos_hint: {'center_x': 0.35, 'center_y': 0.2}
        width: 180
    MDRectangleFlatButton:
        text: 'Send'
        pos_hint: {'center_x':0.85,'center_y':0.2}
        on_press: root.sendMessage()
    MDTextButton:
        text: 'Refresh'
        pos_hint: {'center_x':0.9,'center_y':0.3}
        on_press: root.getMessage()
        font_size: 12
    MDTextButton:
        text: 'Go back'
        pos_hint: {'center_x':0.5,'center_y':0.1}
        on_press: root.manager.current = 'profile'
        font_size: 12